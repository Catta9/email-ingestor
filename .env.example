# === IMAP settings (MVP: IMAP + password or app password) ===
IMAP_HOST=imap.gmail.com
IMAP_PORT=993
IMAP_USERNAME=your_email@gmail.com
IMAP_PASSWORD=your_app_password_or_oauth_token
IMAP_FOLDER=INBOX
# Fetch only recent messages (last N days)
IMAP_SEARCH_SINCE_DAYS=7

# Optional: only process mails from these sender domains (comma-separated, e.g. example.com,contoso.it)
ALLOWED_SENDER_DOMAINS=

# Lead detection keywords (comma separated). Leave empty to process all messages.
LEAD_KEYWORDS=preventivo,quotazione,prezzo,offerta,proposal,estimate

# Path for the Excel lead register generated automatically
LEADS_XLSX_PATH=data/leads.xlsx

# Optional SMTP notification settings
SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_SENDER=
NOTIFY_RECIPIENTS=
SMTP_USE_TLS=true

# === Lead Classification Settings ===

# Strategy: rule_based | ml | hybrid
# - rule_based: usa solo keyword scoring
# - ml: usa solo modello ML (Naive Bayes)
# - hybrid: combina entrambi con logica intelligente (CONSIGLIATO)
LEAD_CLASSIFIER_STRATEGY=hybrid

# Rule-based settings
LEAD_NEGATIVE_KEYWORDS=non interessato,solo info,no acquisto,newsletter,spam
LEAD_SCORE_THRESHOLD=2.0

# ML settings
LEAD_MODEL_PATH=model_store/lead_classifier.json
LEAD_MODEL_THRESHOLD=0.5
ML_USE_NGRAMS=true
ML_USE_FEATURES=true

# Ensemble settings (solo per strategy=hybrid)
ENSEMBLE_ML_WEIGHT=0.7  # peso ML vs rule-based (0.0-1.0)
ENSEMBLE_CONF_HIGH=0.9  # soglia alta confidenza ML
ENSEMBLE_CONF_LOW=0.3   # soglia bassa confidenza ML

# === Logging ===
LOG_LEVEL=INFO
# LOG_FORMAT: json | text (json consigliato per parsing)
LOG_FORMAT=json

# === Scheduler ===
SCHEDULER_INTERVAL_MINUTES=5

# === Database ===
DATABASE_URL=sqlite:///./data/app.db